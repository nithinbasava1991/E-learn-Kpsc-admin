import{u as J,r,j as e,M as V,B as C,a as h,G as n,g as _,P as q,I as y,T as I,F as K,h as Q,S as X,k as Y}from"./index-DvYQWpR8.js";import{d as Z,T as $,a as ee,b as se,c as S,e as T,f as te,g as ae,D as re,h as oe,i as ie}from"./Add-DE-rMGZW.js";import{h as v}from"./moment-G82_0lEo.js";import{c as ne,b as le}from"./UpskillsCategoryApi-DyppGNYx.js";import{E as de,D as ce}from"./Edit-D3ArGjJU.js";const B=[{id:"moduleId",label:"ID"},{id:"moduleName",label:"Name",minWidth:100},{id:"description",label:"Description",minWidth:100},{id:"courseName",label:"Course Name",minWidth:150},{id:"createdBy",label:"Created By",align:"right"},{id:"updatedBy",label:"Updated By",align:"right"},{id:"insertedDate",label:"Inserted Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],fe=()=>{J();const[u,p]=r.useState(0),[l,k]=r.useState(10),[P,E]=r.useState([]),[x,g]=r.useState([]),[M,d]=r.useState(!1),[w,W]=r.useState(!1),[o,f]=r.useState({moduleName:"",description:"",courseId:""}),[i,j]=r.useState({}),[b,U]=r.useState(!1),F=(s,a)=>{p(a)},A=s=>{k(+s.target.value),p(0)},N={"Content-type":"application/json",Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).accessToken},L=async()=>{try{const a=(await ne(N)).data.content;if(a){const D=a.map(t=>({moduleId:t.moduleId,moduleName:t.moduleName,description:t.description,courseName:t.upskillCourseDToList&&t.upskillCourseDToList.length>0?t.upskillCourseDToList[0].courseName:"No Course Name",insertedDate:v(t.insertedDate).format("L"),updatedDate:v(t.updatedDate).format("L"),createdBy:t.createdBy?t.createdBy.userName:"No User",updatedBy:t.updatedBy?t.updatedBy.userName:"No User"}));g(D)}else g([])}catch(s){console.error("Error fetching modules:",s)}},R=async()=>{try{const a=(await le(N)).data.content;if(a){const t=a.sort((c,G)=>c.courseName.localeCompare(G.courseName)).map(c=>({courseId:c.courseId,courseName:c.courseName}));E(t)}}catch(s){console.error("Error fetching courses:",s)}};r.useEffect(()=>{L(),R()},[b]);const H=()=>{const s={};return(!o.moduleName||o.moduleName.trim()==="")&&(s.moduleName="Enter the module name"),(!o.description||o.description.trim()==="")&&(s.description="Enter the description"),o.courseId||(s.courseId="Select a course"),s},m=s=>{f({...o,[s.target.name]:s.target.value}),j({...i,[s.target.name]:null})},z=()=>{W(!1),f({moduleName:"",description:"",courseId:""}),d(!0)},O=()=>{const s=H();Object.keys(s).length===0?(d(!1),U(!b)):j(s)};return e.jsxs(V,{title:e.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Upskills Modules"}),e.jsxs(h,{variant:"contained",color:"primary",sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:z,children:["Add",e.jsx(Z,{sx:{color:"#fff"}})]})]}),children:[e.jsx(n,{container:!0,spacing:_}),e.jsxs(q,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx($,{sx:{maxHeight:440},children:e.jsxs(ee,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(se,{children:e.jsx(S,{children:B.map(s=>e.jsx(T,{align:s.align,style:{minWidth:s.minWidth,fontWeight:600,fontSize:15},children:s.label},s.id))})}),e.jsx(te,{children:x.slice(u*l,u*l+l).map(s=>e.jsx(S,{hover:!0,role:"checkbox",tabIndex:-1,children:B.map(a=>e.jsx(T,{align:a.align,children:a.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(y,{color:"primary",children:e.jsx(de,{})}),e.jsx(y,{color:"error",children:e.jsx(ce,{})})]}):s[a.id]||"No Data"},a.id))},s.moduleId))})]})}),e.jsx(ae,{rowsPerPageOptions:[10,25,100],component:"div",count:x.length,rowsPerPage:l,page:u,onPageChange:F,onRowsPerPageChange:A})]}),e.jsxs(re,{open:M,onClose:()=>d(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(oe,{sx:{fontSize:"16px"},children:w?"Edit Module":"Add Module"}),e.jsx(C,{component:"form",noValidate:!0,sx:{p:3},onSubmit:s=>{s.preventDefault(),O()},children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(I,{fullWidth:!0,label:"Module Name",name:"moduleName",value:o.moduleName,onChange:m,error:!!i.moduleName,helperText:i.moduleName})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(I,{fullWidth:!0,label:"Description",name:"description",value:o.description,onChange:m,error:!!i.description,helperText:i.description,multiline:!0,rows:3})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(K,{fullWidth:!0,error:!!i.courseId,children:[e.jsx(Q,{children:"Course"}),e.jsx(X,{name:"courseId",value:o.courseId,onChange:m,children:P.map(s=>e.jsx(Y,{value:s.courseId,children:s.courseName},s.courseId))}),i.courseId&&e.jsx(FormHelperText,{children:i.courseId})]})})]})}),e.jsxs(ie,{children:[e.jsx(h,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(h,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})]})]})};export{fe as default};
