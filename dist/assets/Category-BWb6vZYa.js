import{u as H,r,j as e,M,B as C,a as x,G as c,g as O,P as G,I as D,T as B}from"./index-DvYQWpR8.js";import{h as I}from"./moment-G82_0lEo.js";import{d as L,T as J,a as V,b as _,c as N,e as S,f as q,g as K,D as Q,h as X,i as Y}from"./Add-DE-rMGZW.js";import{f as Z,a as $}from"./UpskillsCategoryApi-DyppGNYx.js";import{E as ee,D as te}from"./Edit-D3ArGjJU.js";const T=[{id:"categoryId",label:"ID"},{id:"categoryName",label:"Name",minWidth:100},{id:"description",label:"Description",minWidth:100},{id:"createdBy",label:"Created By",align:"right"},{id:"updatedBy",label:"Updated By",align:"right"},{id:"insertedDate",label:"Inserted Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],ce=()=>{H();const[l,y]=r.useState(0),[o,P]=r.useState(10),[u,p]=r.useState([]),[v,d]=r.useState(!1),[E,m]=r.useState(!1),[g,h]=r.useState({categoryName:"",description:""}),[i,w]=r.useState({}),[k,ae]=r.useState(!1),[re,W]=r.useState(null),A=(t,a)=>{y(a)},R=t=>{P(+t.target.value),y(0)},f=JSON.parse(sessionStorage.getItem("user")),j={"Content-type":"application/json",Authorization:"Bearer "+f.accessToken},U=async()=>{try{const a=(await Z(j)).data.content;if(a){const n=a.map(s=>({categoryId:s.categoryId,categoryName:s.categoryName,description:s.description,insertedDate:I(s.insertedDate).format("L"),updatedDate:I(s.updatedDate).format("L"),createdBy:s.createdBy?s.createdBy.userName:"No User",updatedBy:s.updatedBy?s.updatedBy.userName:"No User"}));p(n)}else p([])}catch(t){console.error("Error fetching data:",t)}};r.useEffect(()=>{U()},[k]);const b=t=>{h({...g,[t.target.name]:t.target.value,createdBy:{userId:f.userId}}),w({...i,[t.target.name]:null})},z=()=>{m(!1),h({categoryName:"",description:""}),d(!0)},F=async t=>{m(!0),d(!0);try{const a=await $(t,j),n=a.data;console.log(a),W(n.categoryId),h({categoryName:n.categoryName,description:n.description})}catch(a){console.error("Error fetching category details:",a)}};return e.jsxs(M,{title:e.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Category"}),e.jsxs(x,{variant:"contained",color:"primary",sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:z,children:["Add",e.jsx(L,{sx:{color:"#fff"}})]})]}),children:[e.jsx(c,{container:!0,spacing:O}),e.jsxs(G,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(J,{sx:{maxHeight:440},children:e.jsxs(V,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(_,{children:e.jsx(N,{children:T.map(t=>e.jsx(S,{align:t.align,style:{minWidth:t.minWidth,fontWeight:600,fontSize:15},children:t.label},t.id))})}),e.jsx(q,{children:u.slice(l*o,l*o+o).map(t=>e.jsx(N,{hover:!0,role:"checkbox",tabIndex:-1,children:T.map(a=>e.jsx(S,{align:a.align,children:a.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>F(t.categoryId),color:"primary",children:e.jsx(ee,{})}),e.jsx(D,{color:"error",children:e.jsx(te,{})})]}):t[a.id]},a.id))},t.categoryId))})]})}),e.jsx(K,{rowsPerPageOptions:[10,25,100],component:"div",count:u.length,rowsPerPage:o,page:l,onPageChange:A,onRowsPerPageChange:R})]}),e.jsxs(Q,{open:v,onClose:()=>d(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(X,{sx:{fontSize:"16px"},children:E?"Edit Category":"Add Category"}),e.jsxs(C,{component:"form",noValidate:!0,sx:{p:3},children:[e.jsxs(c,{container:!0,spacing:2,children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(B,{fullWidth:!0,label:"Category Name",name:"categoryName",value:g.categoryName,onChange:b,error:!!i.categoryName,helperText:i.categoryName})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(B,{fullWidth:!0,label:"Description",name:"description",value:g.description,onChange:b,error:!!i.description,helperText:i.description,multiline:!0,rows:3})})]}),e.jsxs(Y,{children:[e.jsx(x,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(x,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})]})]})]})};export{ce as default};
