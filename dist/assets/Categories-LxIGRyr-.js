import{r,u as v,d as N,j as e,M as A,T as l,b as x,G as g,C as B,e as E,f as I}from"./index-BHN5gOPI.js";import{d as k,e as D}from"./DashboardApi-CWqEGjuB.js";import{A as F}from"./Alert-Bdc_UWwK.js";const V=()=>{const[n,f]=r.useState([]),[d,p]=r.useState(!1);r.useState(null);const[h,s]=r.useState(null),b=v(),{jobPostId:i,categoryName:P,jobPostName:y}=b.state||{},c=JSON.parse(sessionStorage.getItem("user")),m={"Content-type":"application/json",Authorization:`Bearer ${c==null?void 0:c.accessToken}`},j=N(),w=async()=>{s(null);try{const o=(await k(m,i)).data;o?f(o):s("No categories found for this job post.")}catch(t){console.error("Error fetching categories:",t),s("Failed to fetch categories.")}};r.useEffect(()=>{i&&w()},[i]);const C=()=>{p(!0)},S=async(t,o)=>{s(null);try{const a=(await D(m,t)).data;(a==null?void 0:a.length)>0?j("subCategories",{state:{categoryId:t,categoryName:o,details:a}}):s("No subcategories found for this category.")}catch(u){console.error("Error fetching subcategories:",u),s("Failed to fetch subcategories.")}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsxs(l,{variant:"h3",gutterBottom:!0,children:["Category Details for ",y||"Unknown Job Post"]})}),h&&e.jsx(x,{sx:{mb:2},children:e.jsx(F,{severity:"error",children:h})}),e.jsx(g,{container:!0,spacing:2,children:(d?n:n.slice(0,4)).map(t=>e.jsx(g,{item:!0,xs:12,sm:6,md:6,children:e.jsx(B,{sx:{border:"1px solid #ccc",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out","&:hover":{transform:"scale(1.03)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",cursor:"pointer"},margin:{sm:2,xs:0},mt:{xs:2,sm:2}},onClick:()=>S(t.categoryId,t.categoryName),children:e.jsxs(E,{children:[t.videoUrl&&e.jsx("iframe",{title:"YouTube Video",src:`https://www.youtube.com/embed/${t.videoUrl}`,frameBorder:"0",allowFullScreen:!0,style:{width:"100%",height:"190px",marginBottom:"1rem"}}),e.jsx(l,{variant:"h4",sx:{mb:1},children:t.categoryName}),e.jsx(l,{variant:"body2",sx:{mt:1},children:t.description})]})})},t.categoryId))}),n.length>4&&!d&&e.jsx(x,{sx:{textAlign:{sm:"right",xs:"center"},mt:2,mr:2},children:e.jsx(I,{variant:"contained",color:"primary",onClick:C,children:"View All"})})]})};export{V as default};
