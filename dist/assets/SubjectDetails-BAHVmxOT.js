import{r as s,u as U,j as e,M as a,G as r,i as w,T as o,C as I,e as T,f as V}from"./index-BHN5gOPI.js";import{I as $}from"./InfoOutlined-CYAz9j-c.js";import{h as G,i as O,j as Y}from"./DashboardApi-CWqEGjuB.js";import{A as p}from"./Alert-Bdc_UWwK.js";const K=()=>{const[d,j]=s.useState({}),[C,b]=s.useState([]),[R,f]=s.useState([]),[l,B]=s.useState(null),[E,M]=s.useState(null),[g,u]=s.useState(null),[S,x]=s.useState(null),[y,h]=s.useState(null),N=U(),{subjectId:n}=N.state||{},m={"Content-type":"application/json",Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).accessToken},k=async()=>{try{const i=(await G(m,n)).data;i?(j(i),h(null)):(j({}),h("Subjects data not found."));const v=(await O(m,n)).data;v.length>0?(b(v),u(null)):(b([]),u("No modules found for this subject."))}catch(t){console.error("Error fetching data:",t),h("Failed to fetch subject data."),u("Failed to fetch modules.")}},F=async t=>{try{const c=(await Y(m,t)).data.content;console.log(c),c.length>0?(f(c),x(null)):(f([]),x("No topics found for this module."))}catch(i){console.error("Error fetching topics:",i),x("Failed to fetch topics.")}};s.useEffect(()=>{n&&k()},[n]);const D=t=>{M(t),F(t)},A=t=>{B(l===t?null:t)};return e.jsxs(e.Fragment,{children:[y?e.jsx(a,{sx:{mt:2},children:e.jsx(p,{severity:"error",children:y})}):e.jsx(a,{sx:{mt:2},children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(w,{children:[e.jsx(o,{variant:"h3",gutterBottom:!0,children:d.subjectName}),l===null&&e.jsxs(o,{variant:"h5",sx:{mt:2},children:["Description: ",d.description]})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(w,{children:e.jsx("iframe",{title:"YouTube Video",src:`https://www.youtube.com/embed/${d.videoUrl}`,frameBorder:"0",allowFullScreen:!0,style:{width:"100%",height:"350px",borderRadius:"20px"}})})})]})}),e.jsx(a,{sx:{mt:2},children:g?e.jsx(p,{severity:"error",children:g}):e.jsx(r,{container:!0,spacing:2,children:C.map(t=>e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(I,{onClick:()=>D(t.moduleId),sx:{border:"1px solid #ccc",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out","&:hover":{transform:"scale(1.03)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",cursor:"pointer"},margin:{sm:2,xs:0},mt:{xs:2,sm:0}},children:e.jsxs(T,{children:[e.jsx(o,{variant:"h5",gutterBottom:!0,children:t.moduleName}),e.jsx(o,{variant:"body2",children:t.description})]})})},t.moduleId))})}),E&&e.jsx(a,{sx:{mt:2},children:S?e.jsx(p,{severity:"error",children:S}):e.jsx(r,{container:!0,spacing:2,children:R.map(t=>e.jsx(r,{item:!0,xs:12,sm:6,md:4,children:e.jsx(I,{sx:{border:"1px solid #ccc",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out","&:hover":{transform:"scale(1.03)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",cursor:"pointer"},margin:{sm:2,xs:0},mt:{xs:2,sm:0}},children:e.jsxs(T,{children:[t.videoUrl&&e.jsx("iframe",{title:`YouTube Video for ${t.topicName}`,src:`https://www.youtube.com/embed/${t.videoUrl}`,frameBorder:"0",allowFullScreen:!0,style:{width:"100%",height:"200px",borderRadius:"8px",marginTop:"10px"}}),e.jsxs(o,{variant:"h5",gutterBottom:!0,sx:{mt:2},children:[t.topicName,e.jsx(V,{sx:{justifyContent:"right",alignItems:"center",borderRadius:"50%",backgroundColor:"transparent","&:hover":{backgroundColor:"action.hover"}},onClick:()=>A(t.topicId),children:e.jsx($,{})})]}),l===t.topicId&&e.jsx(o,{variant:"body2",children:t.description})]})})},t.topicId))})})]})};export{K as default};
